{% extends "base.html" %}

{% block content %}
	<!-- Rank images come from http://clipart.usscouts.org/library/BSA_Boy_Scout_Ranks/ -->
	{% if scouter.role == 'leader' and not scout %}
		<div class="row-fluid bottom-margin">
		    <div class="span12">
		        <div class="leader-note">
		        	<p>Please choose a scout</p>
		        </div>
		    </div>
		</div>
	{% else %}
		<div class="row-fluid bottom-margin">
		    <div class="span12">
		        <div class="rank-header">
		            {% if scouter.role == 'leader' %}
		            	<h5 class="pull-right text-right">{{ scout_dict.name }}
		            		{% if scout.birth_date %}
		            			<small>Age {{ scout_dict.age }}</small><br />
		            			<small>Turns {{ scout_dict.turns_age }} on {{ scout_dict.turns_month }}</small><br />
		            			<small>{{ scout_dict.phone_number }}</small>
		            		{% endif %}
		            	</h5>
		            {% endif %}
		            <h1>Ranks</h1>
		        </div>
		        <table class="table">
		        	<tbody>
		        		<tr>
		                    {% for scout_rank in scout_ranks_list %}
		                        <td>
		                        	{% if scout_rank.date_earned %}
	                        			<img src="{{ STATIC_URL }}img/ranks/{{ scout_rank.image_name }}.gif" width="200" height="200" class="bottom-margin-small">
	                        			<p class="text-center muted">
	                        				{{ scout_rank.rank_name }}<br />
	                        				{{ scout_rank.date_earned }}
	                        			</p>
		                        	{% else %}
		                        		<img src="{{ STATIC_URL }}img/ranks/{{ scout_rank.image_name }}_gs.gif" width="200" height="200">
		                        	{% endif %}
		                        </td>
		                    {% endfor %}
		            	</tr>
		            </tbody>
		        </table>
		    </div>
		</div>

		<!-- Merit badge images come from http://clipart.usscouts.org/library/BSA_Boy_Scout_MeritBadges/ -->
		<div class="row-fluid">
		    <div class="span8 well">
		        <div id="earned-mb-div" class="merit-badge-header">
		            <h3>Earned
		            	{% if scouter.role == 'leader' %}
			            	<div class="pull-right">
			            		<small>
						            <a data-toggle="modal" href="#earned-mb-modal" class="close">&plus;</a>
			            		</small>
			            	</div>
		            	{% endif %}
		            </h3>

		            {% for scout_merit_badge_earned in scout_merit_badges_earned %}
	                	<span class="wrapper">
					    	<img src="{{ STATIC_URL }}img/merit_badges/{{ scout_merit_badge_earned.merit_badge.image_name }}" width="80" height="80" class="top-margin-small">
						    <span class="description"> 
						        {{ scout_merit_badge_earned.merit_badge.name }}<br />
								{{ scout_merit_badge_earned.date_earned }}
						    </span>  
						    {% if scouter.role == 'leader' %}
						    	<span class="mb-close-label"> 
						        	<a class="close delete-earned-mb" id="{{ scout_merit_badge_earned.id }}">&times;</a>
						    	</span>  
						    {% endif %}
						</span>  
		            {% endfor %}
		        </div>
		    </div>
		    <div class="span4 well">
		        <div id="planned-mb-div" class="merit-badge-header">
		            <h3>Planned
		            	{% if scouter.role == 'scout' %}
			            	<div class="pull-right">
			            		<small>
						            <a data-toggle="modal" href="#planned-mb-modal" class="close">&plus;</a>
			            		</small>
			            	</div>
		            	{% endif %}
		            </h3>
		            {% for scout_merit_badge_planned in scout_merit_badges_planned %}
	                	<span id="planned-mb-{{ scout_merit_badge_planned.id }}" class="wrapper">
					    	<img src="{{ STATIC_URL }}img/merit_badges/{{ scout_merit_badge_planned.merit_badge.image_name }}" width="80" height="80" class="top-margin-small">
						    <span class="description"> 
						        {{ scout_merit_badge_planned.merit_badge.name }}<br />
								{{ scout_merit_badge_planned.goal_date }}
						    </span>  
						    {% if scouter.role == 'scout' %}
						    	<span class="mb-close-label"> 
						        	<a class="close delete-planned-mb" id="{{ scout_merit_badge_planned.id }}">&times;</a>
						    	</span>  
						    {% endif %}
						</span>  
		            {% endfor %}
		        </div>
		    </div>
		</div>
		{% if scout_notes %}
			<div class="row-fluid">
			    <div class="span12 well">
			    	<table class="table">
			    		<thead>
			    			<tr>
			    				<th>Date</th>
			    				<th>Method</th>
			    				<th>Purpose</th>
			    				<th>Comment</th>
			    				<th>Followup Date</th>
			    			</tr>
			    		</thead>
				    	<tbody>
				    		{% for scout_note in scout_notes %}
				    			<tr>
				    				<td>{{ scout_note.note_date }}</td>
				    				<td>{{ scout_note.method }}</td>
				    				<td>{{ scout_note.purpose }}</td>
				    				<td>{{ scout_note.comment }}</td>
				    				<td>{{ scout_note.followup_date }}</td>
				    			</tr>
				    		{% endfor %}
				    	</tbody>
			    	</table>
			    </div>
			</div>
		{% endif %}
	{% endif %}

	<div id="earned-mb-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			<h3 id="myModalLabel">Enter Earned Merit Badge</h3>
		</div>
		<div class="modal-body">
			<div class="row-fluid">
				<div class="span6">
					<h4>Select merit badge</h4>
					<input id="earned-mb-name" type="text" class="input-xlarge ajax-typeahead" data-link="/meritbadges">
				</div>
				<div class="span6">
					<h4 class="text-right">Enter date earned</h4>
					<input id="earned-mb-date" type="text" class="input-small pull-right datepicker">
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<button class="btn" data-dismiss="modal">Close</button>
			<button class="btn btn-primary save-earned-mb" data-dismiss="modal">Save</button>
		</div>
	</div>

	<div id="planned-mb-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			<h3 id="myModalLabel">Set Merit Badge Goal</h3>
		</div>
		<div class="modal-body">
			<div class="row-fluid">
				<div class="span6">
					<h4>Select merit badge</h4>
					<input id="planned-mb-name" type="text" class="input-xlarge ajax-typeahead" data-link="/meritbadges">
				</div>
				<div class="span6">
					<h4 class="text-right">Enter goal date</h4>
					<input id="planned-mb-date" type="text" class="input-small pull-right datepicker">
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<button class="btn" data-dismiss="modal">Close</button>
			<button class="btn btn-primary save-planned-mb" data-dismiss="modal">Save</button>
		</div>
	</div>

{% endblock %}